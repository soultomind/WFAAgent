<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script type="text/javascript" src="./WFAAgent.js"></script>
    <script>
        function wsStatus(value) {
            var innerText = "Connected : " + value;
            document.getElementById("wsStatus").innerText = innerText;
        }

        var config = {
            wsAutoConnect: true,
            wsSecure : false,
        };

        var agent = new WFAAgent(config);
        agent.setWsOnOpenEventHandler(function (e) {
            wsStatus("O");
        });

        agent.setWsOnErrorEventHandler(function (e) {
            
        });

        agent.setWsOnMessageEventHandler(function (e) {
            
        });

        agent.setWsOnCloseEventHandler(function (e) {
            wsStatus("X");
        });

        function wsConnect() {
            agent.wsConnect();
        }

        function wsSend() {
            var text = document.getElementById("wsSendText").value;
            agent.wsSend(text);
        }
    </script>
</head>
<body>
    <div>
        <p id="wsStatus">Connected : </p>
        <input type="button" value="new WebSocket" onclick="wsConnect()" />
    </div>
    
    <div>
        <div>
            <textarea id="wsSendText" cols="60" rows="20">{"eventName":"RequestMainHandle"}</textarea>
        </div>
        <div>
            <input type="button" value="WebSocket.Send()" onclick="wsSend()" />
        </div>
    </div>
</body>
</html>