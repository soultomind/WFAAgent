<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<link rel="stylesheet" type="text/css" href="./css/bootstrap/bootstrap.css">-->
    <link rel="stylesheet" href="./css/main.css"/>

    <script type="text/javascript" src="./js/WFAAgent.js"></script>
    <script>
        function wsStatus(value) {
            var innerText = "Connected : " + value;
            document.getElementById("wsStatus").innerText = innerText;
        }

        var config = {
            wsAutoConnect: true,
            wsSecure: false,

            wsPort: 33000,
            // wssPort: 33001,
        };

        var agent = new WFAAgent(config);
        agent.setWsOnOpenEventHandler(function (e) {
            wsStatus("O");
        });

        agent.setWsOnErrorEventHandler(function (e) {
            window.console.error("setWsOnErrorEventHandler=" + JSON.stringify(e));
        });

        agent.setWsOnMessageEventHandler(function (e) {
            //window.console.info(JSON.stringify(e.data));
        });

        agent.setWsOnCloseEventHandler(function (e) {
            wsStatus("X");
        });

        agent.setProcessStartedEventHandler(function (e) {
            window.console.info(JSON.stringify(e));
        });

        agent.setProcessExitedEventHandler(function (e) {
            window.console.info(JSON.stringify(e));
        });

        agent.setTcpServerListenEventHandler(function (e) {
            window.console.info(JSON.stringify(e));
        });

        agent.setTcpServerAcceptClientEventHandler(function (e) {
            window.console.info(JSON.stringify(e));
        });

        agent.setClientDataReceivedEventHandler(function (data) {
            window.console.info(data);
        });

        function wsConnect() {
            agent.wsConnect();
        }

        function wsExecute() {
            var fileName = document.getElementById("wsExecuteFileName").value;
            var data = {
                useCallbackData: true
            };
            agent.wsExecute(fileName, data);
        }
    </script>
</head>
<body>
    <div>
        <h3>WFAAgent WebClient<span> Use SuperSocket</span></h3>
    </div>
    <div>
        <span id="wsStatus">Connected : </span>
        <button type="button" class="btn btn-primary" onclick="wsConnect()">
            웹 소켓 연결
        </button>
    </div>
    
    <div>
        <div>
            <!--<textarea id="wsSendText" cols="60" rows="10">{"eventName":"ProcessStart","data":{"fileName":"C:\\Workspace\\DotNet\\GitProject\\WFAAgent\\TestClientNet45\\bin\\Debug\\TestClientNet45.exe", "useCallbackData":true}}</textarea>-->
            <textarea id="wsExecuteFileName" cols="100" rows="10">C:\\Workspace\\GitProject\\WFAAgent\\TestClientNet45\\bin\\Debug\\TestClientNet45.exe</textarea>
        </div>
        <div>
            <button type="button" onclick="wsExecute()">
                데이터 전송
            </button>
        </div>
    </div>
    <!--<script type="text/javascript" src="./js/bootstrap.js"></script>-->
</body>
</html>