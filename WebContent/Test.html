<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.css">
    <script type="text/javascript" src="./WFAAgent.js"></script>
    <script>
        function wsStatus(value) {
            var innerText = "Connected : " + value;
            document.getElementById("wsStatus").innerText = innerText;
            if (value === "O") {
                document.getElementById("wsStatus").class = "badge";
                document.getElementById("wsStatus").class += "bg-success";
            } else {
                document.getElementById("wsStatus").class = "badge";
                document.getElementById("wsStatus").class += "bg-danger";
            }
        }

        var config = {
            wsAutoConnect: true,
            wsSecure : false,
        };

        var agent = new WFAAgent(config);
        agent.setWsOnOpenEventHandler(function (e) {
            wsStatus("O");
        });

        agent.setWsOnErrorEventHandler(function (e) {
            
        });

        agent.setWsOnMessageEventHandler(function (e) {
            
        });

        agent.setWsOnCloseEventHandler(function (e) {
            wsStatus("X");
        });

        function wsConnect() {
            agent.wsConnect();
        }

        function wsSend() {
            var text = document.getElementById("wsSendText").value;
            agent.wsSend(text);
        }
    </script>
</head>
<body>
    <div>
        <h3>WFAAgent WebClient <span class="badge bg-secondary">SuperSocket</span></h3>
    </div>
    <div>
        <span id="wsStatus" class="badge bg-primary">Connected : </span>
        <button type="button" class="btn btn-primary" onclick="wsConnect()">
            웹 소켓 연결
        </button>
    </div>
    
    <div>
        <div>
            <textarea id="wsSendText" cols="60" rows="20">{"eventName":"ProcessStart","data":{"fileName":"notepad.exe"}}</textarea>
        </div>
        <div>
            <button type="button" class="btn btn-primary" onclick="wsSend()">
                데이터 전송
            </button>
        </div>
    </div>
    <script type="text/javascript" src="./js/bootstrap.js"></script>
</body>
</html>